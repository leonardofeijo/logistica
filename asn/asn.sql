-- FIXME: Correlacionar Avies com Provisões
-- Lista de artigos Firmes não rececionados

SELECT DISTINCT PROV.AJARCD AS CODE, PROV.AJD5CD AS COMPONENT, 

  CONCAT('20', 
		CONCAT (SUBSTRING(PROV.AJAFDT, 2,2), 
			CONCAT('-',
				CONCAT(SUBSTRING(PROV.AJAFDT, 4,2),
					CONCAT('-',SUBSTRING(PROV.AJAFDT, 6,2)
					
					)
				)
			)
		)
	) AS PROVDATE,
	
PROV.AJAIQT AS PROVQTF, APRO.AEGGCD AS APROCODE, FORN.ASAUCD AS FORNSACHA, FORN.ASAHTX AS FORNECEDOR
	
FROM AUTO.YSACHAHPO.YDAJREP PROV

LEFT JOIN  AUTO.YSACHAHPO.YDAEREP APRO
ON APRO.AEARCD = PROV.AJARCD

LEFT JOIN AUTO.YSACHAHPO.YDASREP FORN
ON APRO.AEARCD = FORN.ASARCD

WHERE PROV.AJBZST = 'F' AND PROV.AJE4ST = 'N'


-- AJBZST > FERM OR PROV
-- AJE4ST > RECEIVED OUI OR NO

SELECT CONVERT(VARCHAR(10),GETDATE(),103)
SELECT CONVERT(VARCHAR(10),GETDATE()+9,103);
-- dd/MM/aaaa

SELECT CONVERT(VARCHAR(10),GETDATE(),126);
-- aaaa-MM-dd

SELECT CONVERT(DATE,'240620');
-- 2024-06-20

SELECT CAST('2017-08-25' AS date);

-- 

DECLARE @SAMPLE AS VARCHAR(7);
SET @SAMPLE = '1240618';

SELECT CAST(SUBSTRING(@SAMPLE,2,6) AS date);
